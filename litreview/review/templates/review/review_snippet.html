{% load litreview_extras %}
{% load avatar_tags %}
{% load static %}

<article class="card">
    <header class="card-header">
        <img src="{% static 'follow.png' %}" alt="" aria-hidden="true" loading="lazy">
    </header>

    <section class="card-content">
        <div class="author">
            <span class="type">Critique</span>
            {% avatar user class="avatar" id="user_avatar" %}
            <p>{% get_poster_display review.user %} publié une critique</p><br>
        </div>
        <date>{{ review.time_created|get_posted_at_display }}</date>
        <h3>{{ review.headline }}</h3>
        <p>{{ review.body }}</p>

        {% with ''|center:review.rating as range %}
        {% for x in range %}
        <span class='review-star'>&#9733;</span>
        {% endfor %}
        {% endwith %}
    </section>

    <hr>
    <footer class="card-footer__review">
        <h3>En réponse au ticket</h3>
        {% include "ticket/ticket_snippet.html" with ticket=review.ticket %}
    </footer>

    {% if request.resolver_match.url_name == "posts" %}
    <div>
        <button type="button" class="button"><a href="{% url 'edit_review' review.id %}">
                Modifier </a></button>
    </div>
    <div>
        <button type="button" class="button"><a href="{% url 'delete_review' review.id %}">
                Supprimer </a></button>
    </div>
    {% endif %}
</article>